# Please report PKGBUILD bugs at
# https://github.com/ystein/archlinux-aur-packages

# Maintainer: Yannik Stein <yannik.stein [at] gmail.com>

pkgname=rhythmbox-tray-icon-git
pkgver=20130126
pkgrel=1
pkgdesc="Restores the tray icon functionality from the 0.x series. Please \
report PKGBUILD bugs at https://github.com/ystein/archlinux-aur-packages."

arch=('any')
url="http://github.com/palfrey/rhythmbox-tray-icon"
license=('GPL3')
provides=('rhythmbox-tray-icon')
conflicts=('rhythmbox-tray-icon')
depends=('rhythmbox>=2.90' 'python-cairo' 'gnome-icon-theme')
makedepends=('git')

_gitroot="git://github.com/palfrey/rhythmbox-tray-icon.git"
_gitname="master"

build() {
  if [[ ! -d "$pkgname" ]] ; then
    msg2 'Cloning GIT repository...'
    git clone "$_gitroot" "$pkgname"
  fi
  cd "$pkgname"
  git reset --hard
  git checkout "$_gitname"
  git pull
}

package() {
    cd "$pkgname"
    while read instruction; do
        file=$(echo $instruction | awk '{ print $1 }')
        dest=$(echo $instruction | awk '{ print $2 }')
        install -D -m644 "$file" "$pkgdir/$dest/$file"
    done < "debian/install"
}

